/* ===== Scoped tokens samo za PortfolioDetail ===== */
.pfd{
  --bg:#fdf6e3;
  --surface:#ffffff;
  --text:#0b0b0b;
  --muted:#3b3b3b;
  --brand:#800020;
  --brandHover:#a30028;
  --ring:0 0 0 3px rgba(128,0,32,.18);

  --padX: clamp(1rem, 4vw, 3rem);
  --padY: clamp(1rem, 4vw, 3rem);

  --radius:16px;
  --shadow:0 10px 24px rgba(0,0,0,.08);

  --h1: clamp(1.9rem, 4vw, 2.6rem);
  --h2: clamp(1.3rem, 3vw, 1.6rem);
  --p:  clamp(1rem, 2.5vw, 1.05rem);
}

/* Dark mode (takođe u scope-u) */
@media (prefers-color-scheme: dark){
  .pfd{
    --bg:#0f0f10;
    --surface:#171719;
    --text:#f7f7f7;
    --muted:#cecece;
    --brand:#b51f49;
    --brandHover:#cf2857;
    --ring:0 0 0 3px rgba(197,35,80,.28);
    --shadow:0 14px 28px rgba(0,0,0,.4);
  }
}

/* Utils (scope da ne dira ostatak sajta) */
.pfd .vh{ position:absolute!important; width:1px; height:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; border:0; padding:0; margin:-1px; }
.pfd img{ -webkit-user-drag:none; }

/* Root */
.pfd{
  display: grid;
  grid-template-rows: auto auto 1fr;
  min-height: 100svh;
  background: var(--bg);
}

/* HERO */
.pfd__hero{ width: 100%; }
.pfd__heroImg{
  position: relative; width: 100%; aspect-ratio: 16/9;
  min-height: 280px; max-height: 72vh; overflow: hidden;
}
.pfd__heroImg img{
  width:100%; height:100%; object-fit:cover; display:block;
  filter: saturate(1.04) contrast(1.02);
}
.pfd__heroImg::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(0,0,0,0) 40%, rgba(0,0,0,.55) 100%);
}
.pfd__heroOverlay{
  position: absolute; inset: auto var(--padX) var(--padY) var(--padX);
  color:#fff; text-shadow: 0 2px 16px rgba(0,0,0,.35);
  display: grid; gap: 14px;
}
.pfd__head{
  display: grid; grid-template-columns: 64px 1fr; gap: 14px; align-items: center;
}
.pfd__avatar{
  width:64px; height:64px; border-radius:50%;
  background: linear-gradient(135deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.35);
  display:grid; place-items:center; font-weight: 900; font-size: 1.1rem;
}
.pfd__titleWrap{ display:grid; gap: 6px; }
.pfd__title{ margin:0; font-size: var(--h1); font-weight: 900; }
.pfd__title .handle{ font-weight: 700; opacity: .9; font-size: .9em; margin-left: .3em; }
.pfd__subtitle{ margin:0; opacity:.95; }
.pfd__meta{ display:grid; grid-auto-flow: column; gap:10px; align-items:center; width:max-content; }
.pfd__meta .dot{ opacity:.75; }
.pfd .tags{ list-style:none; display:grid; grid-auto-flow: column; gap:8px; margin:0; padding:0; }
.pfd .tags li{
  padding: 4px 10px; border-radius: 999px; font-weight: 700;
  background: rgba(0,0,0,.34); border:1px solid rgba(255,255,255,.22);
  backdrop-filter: blur(4px);
}

/* CTA */
.pfd__cta{ display:grid; grid-auto-flow: column; gap:10px; width:max-content; }
@media (max-width:520px){ .pfd__cta{ grid-auto-flow: row; width:100%; } }

/* ABOUT */
.pfd__about{
  padding: var(--padY) var(--padX) 0;
  display: grid; gap: 8px;
}
.pfd__about h2{ margin:0; font-size: var(--h2); color: var(--text); }
.pfd__about p{ margin:0; font-size: var(--p); color: var(--muted); line-height: 1.7; }

/* GRID */
.pfd__grid{
  padding: var(--padY) var(--padX) calc(var(--padY) * 1.25);
  display:grid; gap:12px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.pfd__card{
  position: relative; border:0; padding:0; margin:0; cursor: zoom-in;
  background: var(--surface); border-radius: 12px; overflow:hidden;
  box-shadow: var(--shadow);
  outline: none;
}
.pfd__card:focus-visible{ box-shadow: var(--ring); }
.pfd .img{ width:100%; height:100%; object-fit: cover; display:block; }
.pfd .img--blur{ filter: blur(14px) saturate(1.08); transform: scale(1.04); }

/* Empty */
.pfd .empty{
  grid-column: 1/-1; text-align:center; color: var(--muted); padding: 48px 0;
}

/* Buttons (scope!) */
.pfd .btn{
  display:inline-flex; align-items:center; justify-content:center;
  min-height: 44px; padding: 10px 14px; border-radius: 12px;
  font-weight: 800; border: 1px solid transparent; cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
  text-decoration: none; color: inherit; background: transparent; outline: none;
}
.pfd .btn:focus-visible{ box-shadow: var(--ring); }
.pfd .btn--sm{ min-height: 36px; padding: 6px 10px; border-radius: 10px; font-weight: 700; }
.pfd .btn--primary{ background: var(--brand); color:#fff; border-color: var(--brand); box-shadow: 0 8px 22px rgba(128,0,32,.22); }
.pfd .btn--primary:hover{ background: var(--brandHover); transform: translateY(-1px); }
.pfd .btn--ghost{ background: rgba(255,255,255,.08); color:#fff; border-color: rgba(255,255,255,.35); }
@media (prefers-color-scheme: dark){
  .pfd .btn--ghost{ background: rgba(255,255,255,.06); }
}

/* Zvezdice */
.pfd .stars{ display:inline-grid; grid-auto-flow: column; gap:6px; align-items: center; }
.pfd .stars__val{ font-weight: 800; font-size: .95rem; }

/* LIGHTBOX */
.pfd .lightbox{
  position: fixed; inset:0; background: rgba(0,0,0,.85);
  display:grid; place-items:center; z-index: 50;
}
.pfd .lightbox__inner{
  position: relative; width:min(96vw, 1400px);
  display:grid; gap: 10px;
}
.pfd .lightbox__inner img{
  width:100%; height:auto; display:block; border-radius: 12px;
  box-shadow: 0 24px 60px rgba(0,0,0,.45);
}
.pfd .lightbox__controls{
  position:absolute; inset: 50% 0 auto 0; translate: 0 -50%;
  display:grid; grid-auto-flow: column; justify-content: space-between; align-items:center;
  pointer-events:none;
}
.pfd .ctrl{
  pointer-events:auto;
  width:44px; height:44px; border-radius: 50%;
  border: 1px solid rgba(255,255,255,.22);
  background: rgba(255,255,255,.08);
  color:#fff; font-size: 1.4rem; font-weight: 900;
  display:grid; place-items:center; cursor:pointer;
  transition: transform .12s ease; margin: 0 10px;
}
.pfd .ctrl:hover{ transform: translateY(-1px); }
.pfd .idx{
  pointer-events:none; color:#fff; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,.5);
}
.pfd .lightbox__close{
  position:absolute; top:10px; right:10px;
  min-width:44px; min-height:44px; border-radius: 999px;
  border: 1px solid rgba(255,255,255,.22); background: rgba(255,255,255,.08);
  color:#fff; font-size:1.1rem; font-weight:900; cursor:pointer;
}

/* EMPTY/ERROR stranica */
.pfd .pfd__empty{
  padding: var(--padY) var(--padX);
  min-height: 60vh; display:grid; align-content:center; gap:10px;
}
.pfd .pfd__empty h1{ margin: 0; }
.pfd .pfd__empty p{ color: var(--muted); }

/* Responsive finesse */
@media (max-width: 520px){
  .pfd .pfd__head{ grid-template-columns: 54px 1fr; }
  .pfd .pfd__title{ font-size: clamp(1.7rem, 6vw, 2.2rem); }
}

/* --- FIX: hero overlay ne blokira klikove ispod --- */
.hero__imgWrap { 
  position: relative; 
  z-index: 0; 
}
.hero__imgWrap::after {
  pointer-events: none;      /* gradient ne hvata klik */
}
.hero__overlay {
  pointer-events: none;      /* tekst u hero-u je pasivan, ne blokira */
  z-index: 1;
}

/* Podigni ostatak sadržaja iznad hero sloja, za svaki slučaj */
.toolbar, .grid {
  position: relative;
  z-index: 2;
}

/* --- FIX: overlay na kartici ne blokira klik na link (NavLink) --- */
.card__overlay {
  pointer-events: none;
}

/* (opciono) Ako imaš još nekih apsolutnih dekorativnih slojeva: */
.gallery-item .overlay { pointer-events: none; }

.hero__imgWrap,
.hero__overlay,
.card__overlay {
  transform: translateZ(0); /* iOS/WebKit layering tweak */
}
